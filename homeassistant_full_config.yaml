################################################################################
# SPRSUN Heat Pump - Complete Home Assistant Modbus Configuration
################################################################################
# 
# Ta konfiguracja daje PEŁNĄ KONTROLĘ nad pompą ciepła:
# - 46 parametrów Read-Only (R) - sensory do monitorowania
# - 48 parametrów Read-Write (RW) - kontrola i konfiguracja
# 
# WYMAGANIA:
# - Home Assistant z integracją Modbus
# - Elfin W11 Gateway ustawiony na:
#   * Timeout: 5s
#   * Keep alive: 65s
#   * Max accept: 2-3
# 
# INSTALACJA:
# 1. Dodaj do configuration.yaml lub stwórz plik modbus/sprsun.yaml
# 2. Restart Home Assistant
# 3. Sprawdź encje: Developer Tools -> States
# 
################################################################################

modbus:
  - name: sprsun_heatpump
    type: tcp
    host: 192.168.1.234
    port: 502
    timeout: 5
    delay: 0
    
    # ============================================================================
    # READ-ONLY SENSORS (46 parametrów) - Monitorowanie
    # ============================================================================
    
    sensors:
      # ------------------------------------------------------------------------
      # Temperatures - Temperatury (14 parametrów)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Inlet Water Temperature"
        unique_id: sprsun_inlet_temp
        address: 0x0000
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Outlet Water Temperature"
        unique_id: sprsun_outlet_temp
        address: 0x0001
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Hot Water Temperature"
        unique_id: sprsun_hotwater_temp
        address: 0x0002
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Heating Water Temperature"
        unique_id: sprsun_heating_temp
        address: 0x0003
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Ambient Temperature"
        unique_id: sprsun_ambient_temp
        address: 0x0004
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Suction Temperature"
        unique_id: sprsun_suction_temp
        address: 0x0005
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Exhaust Temperature"
        unique_id: sprsun_exhaust_temp
        address: 0x0006
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Coil Temperature"
        unique_id: sprsun_coil_temp
        address: 0x0007
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN EEV Opening"
        unique_id: sprsun_eev_opening
        address: 0x0008
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        unit_of_measurement: "steps"
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Return Air Temperature"
        unique_id: sprsun_return_air_temp
        address: 0x0009
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN IPM Temperature"
        unique_id: sprsun_ipm_temp
        address: 0x000A
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN PV Temperature"
        unique_id: sprsun_pv_temp
        address: 0x000B
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN External Temperature 1"
        unique_id: sprsun_external_temp1
        address: 0x000C
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN External Temperature 2"
        unique_id: sprsun_external_temp2
        address: 0x000D
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        scan_interval: 10
        
      # ------------------------------------------------------------------------
      # Pressures - Ciśnienia (2 parametry)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Low Pressure"
        unique_id: sprsun_low_pressure
        address: 0x000E
        device_address: 1
        data_type: uint16
        scale: 0.01
        precision: 2
        unit_of_measurement: "MPa"
        device_class: pressure
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN High Pressure"
        unique_id: sprsun_high_pressure
        address: 0x000F
        device_address: 1
        data_type: uint16
        scale: 0.01
        precision: 2
        unit_of_measurement: "MPa"
        device_class: pressure
        state_class: measurement
        scan_interval: 10
        
      # ------------------------------------------------------------------------
      # Performance - Wydajność (5 parametrów)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN COP"
        unique_id: sprsun_cop
        address: 0x0010
        device_address: 1
        data_type: uint16
        scale: 0.01
        precision: 2
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Compressor Frequency"
        unique_id: sprsun_freq
        address: 0x0011
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        unit_of_measurement: "Hz"
        device_class: frequency
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Target Frequency"
        unique_id: sprsun_target_freq
        address: 0x0012
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        unit_of_measurement: "Hz"
        device_class: frequency
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Input Power"
        unique_id: sprsun_input_power
        address: 0x0013
        device_address: 1
        data_type: uint16
        scale: 100
        precision: 0
        unit_of_measurement: "W"
        device_class: power
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Output Power"
        unique_id: sprsun_output_power
        address: 0x0014
        device_address: 1
        data_type: uint16
        scale: 100
        precision: 0
        unit_of_measurement: "W"
        device_class: power
        state_class: measurement
        scan_interval: 10
        
      # ------------------------------------------------------------------------
      # Flow & Current - Przepływ i prąd (2 parametry)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Flow Rate"
        unique_id: sprsun_flow
        address: 0x0015
        device_address: 1
        data_type: uint16
        scale: 0.1
        precision: 1
        unit_of_measurement: "m³/h"
        state_class: measurement
        scan_interval: 10
        
      - name: "SPRSUN Inverter Current"
        unique_id: sprsun_inverter_current
        address: 0x0016
        device_address: 1
        data_type: uint16
        scale: 0.01
        precision: 2
        unit_of_measurement: "A"
        device_class: current
        state_class: measurement
        scan_interval: 10
        
      # ------------------------------------------------------------------------
      # Status & Failures - Status i usterki (23 parametry)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Failure Code"
        unique_id: sprsun_failure_code
        address: 0x0017
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 10
        
      - name: "SPRSUN Defrost Status"
        unique_id: sprsun_defrost_status
        address: 0x0018
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 10
        
      - name: "SPRSUN Failure 1"
        unique_id: sprsun_failure1
        address: 0x0019
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 2"
        unique_id: sprsun_failure2
        address: 0x001A
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 3"
        unique_id: sprsun_failure3
        address: 0x001B
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 4"
        unique_id: sprsun_failure4
        address: 0x001C
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 5"
        unique_id: sprsun_failure5
        address: 0x001D
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 6"
        unique_id: sprsun_failure6
        address: 0x001E
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 7"
        unique_id: sprsun_failure7
        address: 0x001F
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 8"
        unique_id: sprsun_failure8
        address: 0x0020
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 9"
        unique_id: sprsun_failure9
        address: 0x0021
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 10"
        unique_id: sprsun_failure10
        address: 0x0022
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 11"
        unique_id: sprsun_failure11
        address: 0x0023
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 12"
        unique_id: sprsun_failure12
        address: 0x0024
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 13"
        unique_id: sprsun_failure13
        address: 0x0025
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 14"
        unique_id: sprsun_failure14
        address: 0x0026
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 15"
        unique_id: sprsun_failure15
        address: 0x0027
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 16"
        unique_id: sprsun_failure16
        address: 0x0028
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 17"
        unique_id: sprsun_failure17
        address: 0x0029
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 18"
        unique_id: sprsun_failure18
        address: 0x002A
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 19"
        unique_id: sprsun_failure19
        address: 0x002B
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN Failure 20"
        unique_id: sprsun_failure20
        address: 0x002C
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 30
        
      - name: "SPRSUN General Status"
        unique_id: sprsun_general_status
        address: 0x002D
        device_address: 1
        data_type: uint16
        scale: 1
        precision: 0
        scan_interval: 10
    
    # ============================================================================
    # BINARY SENSORS - Status binarny (3 parametry kluczowe)
    # ============================================================================
    
    binary_sensors:
      - name: "SPRSUN Heating Control Mark"
        unique_id: sprsun_heating_mark_sensor
        address: 0x0032
        device_address: 1
        input_type: holding
        scan_interval: 10
        device_class: running
        
      - name: "SPRSUN Cooling Control Mark"
        unique_id: sprsun_cooling_mark_sensor
        address: 0x0033
        device_address: 1
        input_type: holding
        scan_interval: 10
        device_class: running
        
      - name: "SPRSUN Hot Water Control Mark"
        unique_id: sprsun_hotwater_mark_sensor
        address: 0x0034
        device_address: 1
        input_type: holding
        scan_interval: 10
        device_class: running
    
    # ============================================================================
    # READ-WRITE CONTROLS (48 parametrów) - Pełna kontrola
    # ============================================================================
    
    switches:
      # ------------------------------------------------------------------------
      # Control Marks - Sterowanie trybami (3 switche)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Heating Control"
        unique_id: sprsun_heating_control
        address: 0x0032
        device_address: 1
        write_type: holding
        scan_interval: 10
        command_on: 1
        command_off: 0
        
      - name: "SPRSUN Cooling Control"
        unique_id: sprsun_cooling_control
        address: 0x0033
        device_address: 1
        write_type: holding
        scan_interval: 10
        command_on: 1
        command_off: 0
        
      - name: "SPRSUN Hot Water Control"
        unique_id: sprsun_hotwater_control
        address: 0x0034
        device_address: 1
        write_type: holding
        scan_interval: 10
        command_on: 1
        command_off: 0
    
    # ============================================================================
    # NUMBERS - Wartości numeryczne (45 parametrów)
    # ============================================================================
    
    numbers:
      # ------------------------------------------------------------------------
      # Unit Mode - Tryb pracy (1 parametr - jako number bo 0-4)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Unit Mode"
        unique_id: sprsun_unit_mode
        address: 0x0036
        device_address: 1
        data_type: uint16
        min: 0
        max: 4
        step: 1
        scale: 1
        scan_interval: 10
        # 0=DHW, 1=Heat, 2=Cool, 3=Heat+DHW, 4=Cool+DHW
        
      # ------------------------------------------------------------------------
      # Setpoints - Punkty zadane (3 parametry - NAJWAŻNIEJSZE!)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Heating Setpoint"
        unique_id: sprsun_heating_setpoint
        address: 0x00C6
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        mode: box
        scan_interval: 10
        
      - name: "SPRSUN Cooling Setpoint"
        unique_id: sprsun_cooling_setpoint
        address: 0x00C8
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        mode: box
        scan_interval: 10
        
      - name: "SPRSUN Hot Water Setpoint"
        unique_id: sprsun_hotwater_setpoint
        address: 0x00CA
        device_address: 1
        data_type: uint16
        min: 40
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        device_class: temperature
        mode: box
        scan_interval: 10
        
      # ------------------------------------------------------------------------
      # Temperature Differences - Różnice temperatur (4 parametry)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Heating Temp Diff"
        unique_id: sprsun_heating_diff
        address: 0x00CB
        device_address: 1
        data_type: uint16
        min: 1
        max: 10
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        mode: box
        scan_interval: 30
        
      - name: "SPRSUN Cooling Temp Diff"
        unique_id: sprsun_cooling_diff
        address: 0x00CC
        device_address: 1
        data_type: uint16
        min: 1
        max: 10
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        mode: box
        scan_interval: 30
        
      - name: "SPRSUN Hot Water Temp Diff"
        unique_id: sprsun_hotwater_diff
        address: 0x00CD
        device_address: 1
        data_type: uint16
        min: 1
        max: 10
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        mode: box
        scan_interval: 30
        
      - name: "SPRSUN Return Water Temp Diff"
        unique_id: sprsun_return_diff
        address: 0x00CE
        device_address: 1
        data_type: uint16
        min: 1
        max: 10
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        mode: box
        scan_interval: 30
        
      # ------------------------------------------------------------------------
      # Economic Mode Curves - Krzywe trybu ekonomicznego (24 parametry)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Economic Heating Curve 00h"
        unique_id: sprsun_econ_heat_00
        address: 0x00CF
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 01h"
        unique_id: sprsun_econ_heat_01
        address: 0x00D0
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 02h"
        unique_id: sprsun_econ_heat_02
        address: 0x00D1
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 03h"
        unique_id: sprsun_econ_heat_03
        address: 0x00D2
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 04h"
        unique_id: sprsun_econ_heat_04
        address: 0x00D3
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 05h"
        unique_id: sprsun_econ_heat_05
        address: 0x00D4
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 06h"
        unique_id: sprsun_econ_heat_06
        address: 0x00D5
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 07h"
        unique_id: sprsun_econ_heat_07
        address: 0x00D6
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 08h"
        unique_id: sprsun_econ_heat_08
        address: 0x00D7
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 09h"
        unique_id: sprsun_econ_heat_09
        address: 0x00D8
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 10h"
        unique_id: sprsun_econ_heat_10
        address: 0x00D9
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Heating Curve 11h"
        unique_id: sprsun_econ_heat_11
        address: 0x00DA
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 00h"
        unique_id: sprsun_econ_cool_00
        address: 0x00DB
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 01h"
        unique_id: sprsun_econ_cool_01
        address: 0x00DC
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 02h"
        unique_id: sprsun_econ_cool_02
        address: 0x00DD
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 03h"
        unique_id: sprsun_econ_cool_03
        address: 0x00DE
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 04h"
        unique_id: sprsun_econ_cool_04
        address: 0x00DF
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 05h"
        unique_id: sprsun_econ_cool_05
        address: 0x00E0
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 06h"
        unique_id: sprsun_econ_cool_06
        address: 0x00E1
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 07h"
        unique_id: sprsun_econ_cool_07
        address: 0x00E2
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 08h"
        unique_id: sprsun_econ_cool_08
        address: 0x00E3
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 09h"
        unique_id: sprsun_econ_cool_09
        address: 0x00E4
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 10h"
        unique_id: sprsun_econ_cool_10
        address: 0x00E5
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Economic Cooling Curve 11h"
        unique_id: sprsun_econ_cool_11
        address: 0x00E6
        device_address: 1
        data_type: uint16
        min: 5
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      # ------------------------------------------------------------------------
      # General Configuration - Konfiguracja ogólna (13 parametrów)
      # ------------------------------------------------------------------------
      
      - name: "SPRSUN Fan Mode"
        unique_id: sprsun_fan_mode
        address: 0x0190
        device_address: 1
        data_type: uint16
        min: 0
        max: 2
        step: 1
        scale: 1
        scan_interval: 30
        # 0=Auto, 1=Low, 2=High
        
      - name: "SPRSUN Pump Mode"
        unique_id: sprsun_pump_mode
        address: 0x0191
        device_address: 1
        data_type: uint16
        min: 0
        max: 2
        step: 1
        scale: 1
        scan_interval: 30
        # 0=Auto, 1=Continuous, 2=Intermittent
        
      - name: "SPRSUN Heating Delay Start"
        unique_id: sprsun_heating_delay
        address: 0x0192
        device_address: 1
        data_type: uint16
        min: 0
        max: 60
        step: 1
        scale: 1
        unit_of_measurement: "min"
        scan_interval: 60
        
      - name: "SPRSUN Cooling Delay Start"
        unique_id: sprsun_cooling_delay
        address: 0x0193
        device_address: 1
        data_type: uint16
        min: 0
        max: 60
        step: 1
        scale: 1
        unit_of_measurement: "min"
        scan_interval: 60
        
      - name: "SPRSUN Hot Water Priority Time"
        unique_id: sprsun_hotwater_priority
        address: 0x0194
        device_address: 1
        data_type: uint16
        min: 0
        max: 120
        step: 1
        scale: 1
        unit_of_measurement: "min"
        scan_interval: 60
        
      - name: "SPRSUN Defrost Cycle Interval"
        unique_id: sprsun_defrost_interval
        address: 0x0195
        device_address: 1
        data_type: uint16
        min: 30
        max: 120
        step: 5
        scale: 1
        unit_of_measurement: "min"
        scan_interval: 60
        
      - name: "SPRSUN Low Ambient Cooling Lockout"
        unique_id: sprsun_low_ambient_lockout
        address: 0x0196
        device_address: 1
        data_type: uint16
        min: -10
        max: 25
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN High Pressure Protection"
        unique_id: sprsun_high_pressure_protect
        address: 0x0197
        device_address: 1
        data_type: uint16
        min: 20
        max: 45
        step: 0.5
        scale: 0.01
        precision: 2
        unit_of_measurement: "MPa"
        scan_interval: 60
        
      - name: "SPRSUN Low Pressure Protection"
        unique_id: sprsun_low_pressure_protect
        address: 0x0198
        device_address: 1
        data_type: uint16
        min: 1
        max: 10
        step: 0.5
        scale: 0.01
        precision: 2
        unit_of_measurement: "MPa"
        scan_interval: 60
        
      - name: "SPRSUN Max Frequency Limit"
        unique_id: sprsun_max_freq
        address: 0x0199
        device_address: 1
        data_type: uint16
        min: 30
        max: 120
        step: 1
        scale: 1
        unit_of_measurement: "Hz"
        scan_interval: 60
        
      - name: "SPRSUN Min Frequency Limit"
        unique_id: sprsun_min_freq
        address: 0x019A
        device_address: 1
        data_type: uint16
        min: 20
        max: 60
        step: 1
        scale: 1
        unit_of_measurement: "Hz"
        scan_interval: 60
        
      - name: "SPRSUN Antilegionella Temperature"
        unique_id: sprsun_antilegionella_temp
        address: 0x019D
        device_address: 1
        data_type: uint16
        min: 60
        max: 75
        step: 0.5
        scale: 0.1
        precision: 1
        unit_of_measurement: "°C"
        scan_interval: 60
        
      - name: "SPRSUN Antilegionella Duration"
        unique_id: sprsun_antilegionella_duration
        address: 0x019E
        device_address: 1
        data_type: uint16
        min: 10
        max: 60
        step: 5
        scale: 1
        unit_of_measurement: "min"
        scan_interval: 60

################################################################################
# TEMPLATE SENSORS - Dodatkowa funkcjonalność
################################################################################
# 
# Dodaj do configuration.yaml lub templates.yaml:

template:
  - sensor:
      # Dekoder trybu pracy
      - name: "SPRSUN Working Mode Text"
        unique_id: sprsun_mode_text
        state: >
          {% set mode = states('number.sprsun_unit_mode') | int(0) %}
          {{ ['Hot Water Only', 'Heating Only', 'Cooling Only', 
              'Heating + Hot Water', 'Cooling + Hot Water'][mode] 
             if mode >= 0 and mode <= 4 else 'Unknown' }}
        icon: mdi:heat-pump
        
      # Status ogrzewania
      - name: "SPRSUN Heating Active"
        unique_id: sprsun_heating_active
        state: >
          {{ is_state('binary_sensor.sprsun_heating_mark_sensor', 'on') 
             and states('sensor.sprsun_compressor_frequency') | int(0) > 0 }}
        icon: mdi:radiator
        
      # Status chłodzenia
      - name: "SPRSUN Cooling Active"
        unique_id: sprsun_cooling_active
        state: >
          {{ is_state('binary_sensor.sprsun_cooling_mark_sensor', 'on') 
             and states('sensor.sprsun_compressor_frequency') | int(0) > 0 }}
        icon: mdi:snowflake
        
      # Status CWU
      - name: "SPRSUN Hot Water Active"
        unique_id: sprsun_hotwater_active
        state: >
          {{ is_state('binary_sensor.sprsun_hotwater_mark_sensor', 'on') 
             and states('sensor.sprsun_compressor_frequency') | int(0) > 0 }}
        icon: mdi:water-boiler
        
      # Fan mode text
      - name: "SPRSUN Fan Mode Text"
        unique_id: sprsun_fan_mode_text
        state: >
          {% set mode = states('number.sprsun_fan_mode') | int(0) %}
          {{ ['Auto', 'Low', 'High'][mode] if mode >= 0 and mode <= 2 else 'Unknown' }}
        icon: mdi:fan
        
      # Pump mode text
      - name: "SPRSUN Pump Mode Text"
        unique_id: sprsun_pump_mode_text
        state: >
          {% set mode = states('number.sprsun_pump_mode') | int(0) %}
          {{ ['Auto', 'Continuous', 'Intermittent'][mode] 
             if mode >= 0 and mode <= 2 else 'Unknown' }}
        icon: mdi:water-pump

################################################################################
# PRZYKŁADOWA KARTA LOVELACE
################################################################################
#
# Dodaj do dashboard:

type: vertical-stack
cards:
  # Status główny
  - type: entities
    title: SPRSUN Heat Pump - Status
    entities:
      - entity: sensor.sprsun_inlet_water_temperature
      - entity: sensor.sprsun_outlet_water_temperature
      - entity: sensor.sprsun_hot_water_temperature
      - entity: sensor.sprsun_ambient_temperature
      - entity: sensor.sprsun_compressor_frequency
      - entity: sensor.sprsun_input_power
      - entity: sensor.sprsun_cop
      - entity: sensor.sprsun_working_mode_text
  
  # Kontrola podstawowa
  - type: entities
    title: Podstawowa Kontrola
    entities:
      - entity: number.sprsun_unit_mode
      - entity: switch.sprsun_heating_control
      - entity: switch.sprsun_cooling_control
      - entity: switch.sprsun_hotwater_control
  
  # Setpointy
  - type: entities
    title: Temperatury Zadane
    entities:
      - entity: number.sprsun_heating_setpoint
      - entity: number.sprsun_cooling_setpoint
      - entity: number.sprsun_hot_water_setpoint
  
  # Konfiguracja
  - type: entities
    title: Konfiguracja
    entities:
      - entity: number.sprsun_fan_mode
      - entity: number.sprsun_pump_mode
      - entity: number.sprsun_heating_temp_diff
      - entity: number.sprsun_cooling_temp_diff
      - entity: number.sprsun_hotwater_temp_diff

################################################################################
# UWAGI KOŃCOWE
################################################################################
#
# 1. scan_interval:
#    - Temperatury i parametry statusu: 10s (szybki feedback)
#    - Failure codes: 30s (mniej krytyczne)
#    - Konfiguracja: 60s (rzadko się zmienia)
#
# 2. Całkowite obciążenie Modbus:
#    - 46 sensors × 10-30s interwały
#    - 3 binary_sensors × 10s
#    - 48 numbers/switches (tylko przy read/write)
#    - Home Assistant optymalizuje batch reads automatycznie!
#
# 3. Elfin W11 ustawienia aktualne:
#    - Timeout: 5s (wystarczy dla HA batch reads)
#    - Max accept: 2-3 (HA używa 1 connection)
#    - Keep alive: 65s
#
# 4. Test:
#    - Check Configuration przed restartem
#    - Zobacz logi: /config/home-assistant.log
#    - Sprawdź Developer Tools -> States -> filtruj "sprsun"
#
# 5. Optional: Jeśli chcesz zmniejszyć obciążenie:
#    - Zwiększ scan_interval dla mniej ważnych parametrów
#    - Usuń failure codes 1-20 jeśli nie potrzebujesz
#    - Usuń economic curves jeśli nie używasz
#
################################################################################
